!
no aaa root
!
username admin privilege 15 role network-admin secret sha512 $6$hb.8VFI7A9D/0zi2$sZady959HlXHgFdWU9r01VDwmbM2CrhDYIXBJzHb3scDP8/t/4ozwxpZbwEgDxbWL.mHYtie0rSO8fRSZ5D0T1
!
management api http-commands
   protocol http
   no shutdown
!
daemon doublezero-agent
   exec /mnt/flash/doublezero-agent -controller host.docker.internal:7004 -pubkey 4uQeVj5tqViQh7yWWGStvkEG1Zmhx6uasJtWCJziofM
   no shutdown
!
daemon foo
   exec /usr/bin/EosSdkRpcAgent --daemon-name foo
   no shutdown
!
no service interface inactive port-id allocation disabled
!
transceiver qsfp default-mode 4x10G
!
service routing protocols model multi-agent
!
agent PowerManager shutdown
agent LedPolicy shutdown
agent Thermostat shutdown
agent PowerFuse shutdown
agent StandbyCpld shutdown
agent LicenseManager shutdown
!
management api eos-sdk-rpc
   transport grpc foo
      localhost loopback
      service all
      no disabled
!
hostname dut
ip name-server vrf default 192.168.65.7
!
spanning-tree mode mstp
!
system l1
   unsupported speed action error
   unsupported error-correction action error
!
management api gnmi
   transport grpc gnmi
!
interface Ethernet1
!
interface Management0
   ip address 172.16.99.2/24
!
interface Tunnel500
   mtu 9216
   ip address 169.254.0.0/31
   tunnel mode gre
   tunnel source 2.2.2.2
   tunnel destination 1.1.1.1
   tunnel path-mtu-discovery
   tunnel ttl 32
!
ip routing
!
ip prefix-list PL-DZ_AMS_SUMMARY seq 10 permit 195.219.138.56/29 le 32
ip prefix-list PL-DZ_EWR_SUMMARY seq 10 permit 64.86.249.80/29 le 32
ip prefix-list PL-DZ_FRA_SUMMARY seq 10 permit 195.219.220.88/29 le 32
ip prefix-list PL-DZ_LAX_SUMMARY seq 10 permit 207.45.216.136/29 le 32
ip prefix-list PL-DZ_LHR_SUMMARY seq 10 permit 195.219.120.72/29 le 32
ip prefix-list PL-DZ_SIN_SUMMARY seq 10 permit 180.87.102.104/29 le 32
ip prefix-list PL-DZ_TYO_SUMMARY seq 10 permit 180.87.154.112/29 le 32
ip prefix-list PL-USER-500 seq 10 permit 100.100.100.100/32
!
ip route 0.0.0.0/0 172.16.99.1
!
route-map RM-USER-500-IN permit 10
   match ip address prefix-list PL-USER-500
   match as-path length = 1
!
route-map RM-USER-500-OUT permit 10
   match ip address prefix-list PL-DZ_LAX_SUMMARY
!
route-map RM-USER-500-OUT permit 20
   match ip address prefix-list PL-DZ_EWR_SUMMARY
!
route-map RM-USER-500-OUT permit 30
   match ip address prefix-list PL-DZ_LHR_SUMMARY
!
route-map RM-USER-500-OUT permit 40
   match ip address prefix-list PL-DZ_FRA_SUMMARY
!
route-map RM-USER-500-OUT permit 50
   match ip address prefix-list PL-DZ_SIN_SUMMARY
!
route-map RM-USER-500-OUT permit 60
   match ip address prefix-list PL-DZ_TYO_SUMMARY
!
route-map RM-USER-500-OUT permit 70
   match ip address prefix-list PL-DZ_AMS_SUMMARY
!
router bgp 65342
   router-id 10.10.10.10
   neighbor 169.254.0.1 remote-as 65000
   neighbor 169.254.0.1 passive
   neighbor 169.254.0.1 description USER-500
   neighbor 169.254.0.1 route-map RM-USER-500-IN in
   neighbor 169.254.0.1 route-map RM-USER-500-OUT out
   neighbor 169.254.0.1 maximum-routes 1
   neighbor 169.254.0.1 maximum-accepted-routes 1
!
router multicast
   ipv4
      software-forwarding kernel
   !
   ipv6
      software-forwarding kernel
!
end
